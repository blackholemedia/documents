
Table of Contents
=================

   * [计算机程序的运行](#计算机程序的运行)
      * [阅读说明](#阅读说明)
      * [参考引用](#参考引用)
      * [冯诺依曼结构](#冯诺依曼结构)
      * [数字电路](#数字电路)
         * [基础](#基础)
         * [加法器的实现](#加法器的实现)
      * [操作系统](#操作系统)
      * [计算机程序的运行过程](#计算机程序的运行过程)

Created by ALTA
# 计算机程序的运行  

<font color=#008000>绿色字体</font>代表个人的思考理解，<font color=Yellow>黄色字体</font>代表阅读理解过程中的疑问，<font color=Red>红色字体</font>代表关键重要信息，<u>下划线</u>代表次关键重要信息，`阴影`或 *一般斜体* 均表示引用或强调 

```python
# ---------------------------------- 输出结果
```

## 参考引用  

本文引用及参考自下列文章/网站， 版权归属原作者所有：

1. [代码是如何控制硬件的](<https://www.zhihu.com/question/20492284>)
2. [为什么汇编语言不能越过操作系统操控硬件？](https://www.zhihu.com/question/43575404/answer/97059700)  
3. [从汇编角度, 操作系统和程序是什么关系](<https://www.zhihu.com/question/322366981>)  
4. [程序在计算机内部是如何运行的](<https://www.zhihu.com/question/296466492/answer/833888487>)

### 

<div align="center"> <img src="https://blackholemedia.github.io/documents/statics/417bc315-4409-48c6-83e0-59e8d405429e.jpg" width="400px"> </div><br>

Content 

数学公式
$$
f'(t)=\lim_{\Delta t \to 0}\frac{f(t + \Delta t)-f(t)}{\Delta t}
$$

1. Number-prefix class  

   Content 

   - Symbol-prefix class 

     Content 

## 冯诺依曼结构  

> 采取**存储程序**的方式让**控制器**从**存储器**中读取二进制并解释然后让**运算器**去计算数值

<div align="center"> <img src="https://blackholemedia.github.io/documents/statics/von_arc.png" width="400px"> </div><br>  

## 数字电路  

### 基础  

1. 三极管/场效应管类似继电器（一种通过线圈产生磁场、然后用磁场控制物理开关的通断与否的设备）；在它一个管脚上输入/切断电压信号，另一个管脚就会出现高/低电平。继电器是一种利用电磁铁控制的开关；当向电磁铁通电时就产生磁场，而这个磁场就会吸合或者分离开关，从而实现“以微弱电流控制另一条电路的通断”这个功能。

要理解代码是如何执行的，需要以下两方面的基础：

- 数字电路基础，在这门课程里面你将会学习最重要的3块知识，组合逻辑电路，时序逻辑电路，SRAM存储器结构;
- 计算机组成原理，在这门课程里面你将会学习到CPU的组成(包括各种寄存器，译码器，ALU）

1. 组合逻辑电路

   组合逻辑电路是最基本的门电路，特点是给定输入马上产生输出，比如最简单的与门，同时输入高电平，会立即输出高电平。如果撤去输入的信号，则输出也立马消失。组合逻辑的这种无时延的特性，适用于作为**控制结构**

2. 时序逻辑电路

   时序逻辑电路是在组合逻辑电路的基础上，引入反馈，即将输出信号接入到输入信号中，这样做的结果就是当电路中输入信号消失后，电路的输出状态还能保持一段时间。最基本的时序逻辑电路叫做触发器，通常会利用时序逻辑电路的延迟输出特性，来**锁存数据**，也就是所谓的寄存器

3. SRAM存储器  

   SRAM存储器，是最简单，最快速，同时成本也最高的存储器。基本上SRAM存储器就是由单个1bit的寄存器排列起来形成的大容量结构。在早期的电脑中，内存就是SRAM，CPU直接从里面读取所需要的指令和数据。

4. CPU的组成  

   CPU的组成，CPU是一个在统一时钟脉冲下，时序电路和组合逻辑电路组成的，复杂的数字电路系统。CPU中的ALU(逻辑运算单元)是一个典型的组合逻辑电路，ALU两端的输入是寄存器，寄存器和译码器是典型的时序逻辑电路。简而言之就是一个按照固定时间输出高低电平的装置。

### 加法器的实现  

与门电路： 数据有两个，分别通过两条不同的线路进入与门；输出只有一个，必须给它输入两个高电平，它才会输出高电平；否则就输出低电平（简化表述为：只有输入两个1，它才输出1，否则输出0）。

异或电路： 数据有两个，分别通过两条不同的线路进入异或门；输出只有一个，必须给它输入两个相同电平，它才会输出高电平；否则就输出低电平（简化表述为：输入异电平，输出高电平）

二进制加法：二进制加法，1+1=0（同时进位）；1+0=1；0+1=1；0+0=0：；但这样（同时进位）这个说明就会丢失了，所以需要同时用一个与门模拟高位进位，也就是说  

## 操作系统  

left blank  

## 计算机程序的运行过程  

cpu本身只能执行指令集里固定的指令，所有语言的最终归宿就是翻译成指令集。汇编语言在操作系统下编译出的程序其实并不是纯粹的指令集二进制，而是类似于word之类的有固定格式的elf文件(linux系统)，操作系统先解析该文件，把文件装载到内存，然后改变cpu的执行流，这是依赖于操作系统的部分

1. 原则1  

   计算机的代码，都是机器码，都由CPU一条一条地执行的，无论是应用程序的代码，还是操作系统的代码，都是机器码，CPU都用一样的方法来执行，这个问题和内核态还是用户态无关。所以，没有“操作系统翻译用户程序”的说法。所有的软件指令，都被CPU用一样的方法执行。

2. 原则2  

   谁能首先获得CPU的控制权，谁就可以变成操作系统，因为它可以把该堵的门都堵了，让后来者进不来。**操作系统接管硬件资源之后，怎么保证它自己的主导权**。事实上，**所有的应用程序都是通过操作系统提供的系统调用来执行的**  

   那么哪个程序是第一个运行的呢？BIOS中的固件程序。BIOS中集成了硬件厂商预先刷入的一段小代码，机器开机一启动，这段代码就被立刻执行（这是由硬件控制的），因此在这个阶段，计算机资源被BIOS霸占。

   然而，BIOS中的程序对于掌管计算机资源并没有太大的兴趣（其实是BIOS存储的程序太小，无力掌管），所以BIOS程序就把资源交给磁盘上的bootloader程序了。从这里开始硬件资源归bootloader程序管理。bootloader程序运行之后了，发现自己对掌管计算机资源还是没有太大的兴趣（其实是bootloader程序也太小了，无力掌管），就说那好我把操作系统程序加载进来运行，让它来管。就这样操作系统程序就开始运行了。

   